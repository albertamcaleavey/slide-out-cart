<main id="product" class="background-white" itemscope itemtype="http://schema.org/Product">
  <div class="flex-container background-white aifs">
    <div class="half double-accent-padding" id="featured-image-wrapper">
      <style>
        .product-image-preview {
          height: 5vw;
          position: absolute;
          width: 5vw;
          border: 2px solid #21409A;
          border-radius: 100%;
          overflow: hidden;
          background-color: white;      
}	
        .image-bubble-wrapper { background-color: #edf5f5; }
        .photo-bubble { width: 15px; height: 15px; border-radius: 100%; border: 1px solid #21409A; margin: 5px; }
        .photo-bubble.active { background-color: #21409A; }
        .product-image-preview:nth-of-type(2) {margin-top:6vw ;}
                .product-image-preview:nth-of-type(3) {margin-top: 12vw;}

      </style>
      <img src="{{ product.featured_image.src | img_url: 'grande' }}" class="fw featured_image preview-image" id="main-featured-image" alt="{{variant.name}}">

    </div>
   

    <script>
      $('#lifestyle-1-preview').click(function() {
        $('.preview-image').hide(); 
        $('.sub_featured_image2').show();
      }); 
            $('#lifestyle-2-preview').click(function() {
        $('.preview-image').hide(); 
        $('.sub_featured_image3').show();
      }); 
            $('#featured-image-preview').click(function() {
        $('.preview-image').hide(); 
        $('#main-featured-image').show();
      }); 
    </script>

    <div class="half double-accent-padding">
      <p class="subscript">
		{% if product.title contains "Women's Crew" %}
                <a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/women">Women's Socks</a> |
        		<a href="/collections/womens-crew">Women's Crew</a>
        {% elsif product.title contains "Men's Crew" %}
                <a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/men">Men's Socks</a>  |
               	<a href="/collections/mens-crew">Men's Crew</a>
        {% elsif product.title contains "Kid" %}
                <a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/kids">Kid's Socks</a> |
        		<a href="/collections/kids-crew">Kid's Crew</a>
        {% elsif product.title contains "Youth" %}
                <a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/kids">Kid's Socks</a> |
        		<a href="/collections/youth-crew">Youth Crew</a> 
        {% elsif product.title contains "Toddler" %}
                <a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/kids">Kid's Socks</a> |
        		<a href="/collections/toddler">Toddler</a>
        {% elsif product.title contains "Women's Low Cut" %}
                 <a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/women">Women's Socks</a> |
        		<a href="/collections/womens-ankle">Women's Ankle</a>
        {% elsif product.title contains "Men's Low Cut" %}
                <a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/men">Men's Socks</a> |
               	<a href="/collections/mens-ankle">Men's Ankle</a>
        {% elsif product.title contains "Women's Performance" %}
                 <a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/women">Women's Socks</a> |
        		<a href="/collections/womens-performance">Women's Performance</a>
        {% elsif product.title contains "Men's Performance %}
              	<a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/men">Men's Socks</a> |
               	<a href="/collections/mens-performance">Men's Performance</a>
        {% elsif product.title contains "No Show" %}
               <a href="/collections/all-socks">All Socks</a> | 
				<a href="/collections/women">Women's Socks</a> |
        		<a href="/collections/womens-no-show">Women's No Show</a>
		{% endif %}
      </p>
      <h3 class="text-red ttu">Wholesale Only Product</h3>
      <h2 class="nm ttu"> {{ product.title }}</h2>
      
            <p id="product-summary">
              This is a wholesale only product and isn't purchasable via this page. Please contact <a href="mailto:wholesale@pacas.us" class="text-purple">Wholesale Support</a> with any questions.</p>
 
      <div style="height: 100px;width: 100%;"></div>
    </div>
  </div>

    <svg xmlns="http://www.w3.org/2000/svg" class="product-topper"viewBox="0 0 1440 320"><path fill="#afbde1" fill-opacity="1" d="M0,224L40,224C80,224,160,224,240,197.3C320,171,400,117,480,128C560,139,640,213,720,229.3C800,245,880,203,960,176C1040,149,1120,139,1200,160C1280,181,1360,235,1400,261.3L1440,288L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z" ></path></svg>  

  <section class="background-light-purple double-accent-padding tac" id="product-specs">
    <div class="flex-container-no jcc">
      <div class="product-specs-wrapper third" id="description">
        <h4 class="text-white ttu product-specs-active">Description</h4>
      </div>
      <div class="product-specs-wrapper third do shipping-and-returns">
        <h4 class="text-white ttu">Shipping & Returns</span></h4>
      </div>
      <div class="product-specs-wrapper third mo shipping-and-returns">
        <h4 class="text-white ttu">Shipping</span></h4>
      </div>
      <div class="product-specs-wrapper third" id="care-guide">
        <h4 class="text-white ttu">Care Guide</h4>
      </div>
    </div>
    <div id="product-specs-wrapper">
      <p>{{product.description}}</p>
    </div>
  </section>
  <script>
    $(document).ready(function() {
      let shipping = "Shipping normally takes between 2 - 5 business days. If you feel that your order has been held up or delayed in processing, just email us! We are happy to get to the bottom of it for you and can resolve most shipping issues on your behalf. Returns are always on us."
      let care = "When itâ€™s time to wash your socks, you can add them to the washing machine with like colors. Make sure to run your socks on the gentle cycle with cold water to prevent any damage, tumble dry."
      let description = "{{product.description}}"
      $('.shipping-and-returns').click(function (){
        $('.product-specs-active').removeClass("product-specs-active")
        $(this).children("h4").addClass("product-specs-active")
        $('#product-specs-wrapper p').text(shipping)
      })
    $('#description').click(function (){
        $('.product-specs-active').removeClass("product-specs-active")
        $(this).children("h4").addClass("product-specs-active")
         $('#product-specs-wrapper p').html(description)
      })
        $('#care-guide').click(function (){
        $('.product-specs-active').removeClass("product-specs-active")
        $(this).children("h4").addClass("product-specs-active")
        $('#product-specs-wrapper p').text(care)
      })
    })
  </script>
    <section class="background-white">
    <section class="background-white accent-padding-so flex-container aifs">
      <div class="one-third accent-padding" id="mobile-benefits-wrapper">
        <div class="accent-padding  mobile-benefits">
          <h3 class="ttu accent-crown nm">Hypoallergenic</h3>
          <p>doesn't contain lanolin, which is a natural oil that causes allergies</p>
        </div>
        <div class="accent-padding  mobile-benefits">
          <h3 class="ttu accent-crown nm">Thermoregulating</h3>
          <p>alpaca fiber has a hollow core, which insulates heat in the winter and helps keep it cool in the summer</p>
        </div>
      <div class="accent-padding mo  mobile-benefits">
          <h3 class="ttu accent-crown nm">Moisture Wicking</h3>
          <p>doesn't absorb ba-a-a-ad moisture, unlike wool</p>
      </div>
      <div class="accent-padding mo  mobile-benefits">
          <h3 class="ttu accent-crown nm">Warmer Than Wool</h3>
          <p>5x warmer than wool. Take that, sheeple!</p>
      </div>
      </div>
      <div class="mo tac" style="margin-top: -20px; margin-bottom: 50px;">
        <div class="selection-circle background-dark-teal"></div>
        <div class="selection-circle"></div>
        <div class="selection-circle"></div>
        <div class="selection-circle"></div>
      </div>
      <div class="one-third tac asfe">
        <img src="{{'rebrand-paca.png' | asset_url}}" id="alpaca-break">
      </div>
      <div class="one-third accent-padding do">
        <div class="accent-padding do">
          <h3 class="ttu accent-crown nm">Moisture Wicking</h3>
          <p>doesn't absorb ba-a-a-ad moisture, unlike wool</p>
        </div>
        <div class="accent-padding do">
          <h3 class="ttu accent-crown nm">Warmer Than Wool</h3>
          <p>5x warmer than wool. Take that, sheeple!</p>
        </div>
      </div>
    </section>
          <script>
        if ($(window).width() < 800) {
          setInterval(function(){ 
            if ($('.mobile-benefits:last-of-type').is(":visible")) {
               $('.mobile-benefits:visible').hide()
               $('.mobile-benefits:first-of-type').show();
                $('.selection-circle.background-dark-teal').removeClass('background-dark-teal')
                $('.selection-circle:first-of-type').addClass('background-dark-teal')
            }
            else {
            $('.mobile-benefits:visible').hide().next().show();
            $('.selection-circle.background-dark-teal').removeClass('background-dark-teal').next().addClass("background-dark-teal")
            }
          }, 3000);
      }
      </script>
      <section class="background-natural">
      <section class="double-accent-padding background-natural tac" id="product-review-wrapper">
        <h1 class="detail-accent ttu tac nm">Unbelievably Soft.</h1>
        <p class="tac">(but don't just take our word for it...)</p>
        <img src="{{'rebrand-stars.png' | asset_url}}" class="review-stars" />
        <p class="tac nm">1104 Reviews</p>
            <iframe src="https://pacas-reviews.herokuapp.com/welcome/show" id="iFrame1" style="border: none; width: 100%;"></iframe>
                </section>

        <script>
 $("#iFrame1").on("load", function () {
  $('#iFrame1').iFrameResize( [{
    checkOrigin:false,
    log:true,
    minHeight:15000,
    heightCalculationMethod:'lowestElement'
  }] );
});
</script>

     <h2 class="ttu rotated text-natural accent-crown">Spoil Your<br> Feet!</h2> 
    <svg xmlns="http://www.w3.org/2000/svg" class="topper background-natural"viewBox="0 0 1440 320"><path fill="#a0dbe3" fill-opacity="1" d="M0,224L40,224C80,224,160,224,240,197.3C320,171,400,117,480,128C560,139,640,213,720,229.3C800,245,880,203,960,176C1040,149,1120,139,1200,160C1280,181,1360,235,1400,261.3L1440,288L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z" ></path></svg>  
    <section class="background-light-teal">
                <div class="fw flex-container index-product-preview-wrapper double-accent-padding" id="socks-quick">
        <div class="one-third index-product-preview">
        </div>
        <div class="one-third index-product-preview">
        </div>
        <div class="one-third index-product-preview">
        </div>
          <div class="one-third index-product-preview">
        </div>
      </div>
    </section>
                  </div>

<section class="flex-container" id="final-cta">
    <div class="background-teal one-third flex-container-no fdc">
    <a href="/collections/men">
      <h1 class="tac text-dark-teal ttu">Men</h1>
    </a>
        <div class="background-red fw">
          <a href="/collections/men">
              <h3 class="tac text-natural ttu">Shop Now</h3>
          </a>
        </div>
    </div>
    <div class="background-purple one-third flex-container-no fdc" id="cta-shopwomen">
      <a href="/collections/women">
        <h1 class="tac text-dark-purple ttu">Women</h1>
      </a>
      <div class="background-teal fw">
        <a href="/collections/women">
          <h3 class="tac text-natural ttu">Shop Now</h3>
        </a>
      </div>
    </div>
    <div class="background-red one-third flex-container-no fdc">
      <a href="/collections/kids">
        <h1 class="tac text-dark-red ttu">Kiddies</h1>
      </a>
      <div class="background-purple fw">
        <a href="/collections/kids">
          <h3 class="tac text-natural ttu">Shop Now</h3>
        </a>
      </div>
    </div>
  </section>

</main>
{% if product.tags contains "All Kids" %}
<style>
.swatch.clearfix[data-option-index="0"] .swatch-element {
    width: 100% !important;
}
</style>
{% endif %}
<style>
#product-specs-wrapper span { font-weight: lighter;   }

#product-specs-wrapper p span { font-weight: lighter;   }
  #product-specs-wrapper{ max-width: 800px; margin: 0 auto; }
  h2 { line-height: 1; }
  .shopify-payment-button__more-options {display:  none;}
  .product-specs-active {
    color:  #21409A;
    text-decoration:  underline;
  }
</style>
  <script>

    var selectCallback_{{ product.id }} = function(variant, selector) {

      // BEGIN SWATCHES
      if (variant) {
        var form = jQuery('#' + selector.domIdPrefix).closest('form');
        for (var i=0,length=variant.options.length; i<length; i++) {
          var radioButton = form.find('.swatch[data-option-index="' + i + '"] :radio[value="' + variant.options[i] +'"]');
          if (radioButton.size()) {
            radioButton.get(0).checked = true;
          }
        }
      }
      // END SWATCHES
      timber.productPage({
        money_format: "{{ shop.money_format }}",
        variant: variant,
        selector: selector,
        product_id: '{{ product.id }}',
        translations: {
        add_to_cart : "{{ settings.add_to_cart_text }}",
        sold_out : "Sold Out",
        unavailable : "Unavailable"
      }
                         });
    };
    jQuery(function($) {
      new Shopify.OptionSelectors('productSelect-{{ product.id }}', {
                                  product: {{ product | json }},
                                  onVariantSelected: selectCallback_{{ product.id }},
                                  enableHistoryState: true
                                  });
    });
  </script>
{% if product.tags contains "accessories" %}
<script>
    $('form').change(function() {
      var color = $('.swatch.clearfix[data-option-index="1"]  input:checked').attr("value");
      $('#color-selected').text(color); 
    })
</script>
{% endif %}
<script>
      $('form').change(function() {
      var size = $('.swatch.clearfix[data-option-index="0"]  input:checked').attr("value");
      $('#size-selected').text(size); 
    })

    $(document).ready(function() {
      $(".preview-image").on("swipeleft",function() {
      if (  $(this).next('img').length ) {
        $(this).hide().next('img').show()
        $('.photo-bubble.active').removeClass('active').next('.photo-bubble').addClass('active')
      }
    })

    $('.preview-image').on("swiperight", function() {
      if (  $(this).prev('img').length ) {
        $(this).hide().prev('img').show()
        $('.photo-bubble.active').removeClass('active').prev('.photo-bubble').addClass('active')

      }
    })

    })
 

  </script>
  <script text="text/javascript">
    var _learnq = _learnq || [];

    var item = {
      Name: {{ product.title|json }},
      ProductID: {{ product.id|json }},
      Categories: {{ product.collections|map:'title'|json }},
      ImageURL: "https:{{ product.featured_image.src|img_url:'grande' }}",
      URL: "{{ shop.secure_url }}{{ product.url }}",
      Brand: {{ product.vendor|json }},
      Price: {{ product.price|money|json }},
      CompareAtPrice: {{ product.compare_at_price_max|money|json }}
    };

    _learnq.push(['track', 'Viewed Product', item]);
    _learnq.push(['trackViewedItem', {
      Title: item.Name,
      ItemId: item.ProductID,
      Categories: item.Categories,
      ImageUrl: item.ImageURL,
      Url: item.URL,
      Metadata: {
        Brand: item.Brand,
        Price: item.Price,
        CompareAtPrice: item.CompareAtPrice
      }
    }]);
  </script>
  <script type="text/javascript">
    var _learnq = _learnq || [];
    document.getElementById("add-to-cart-{{ product.id }}").addEventListener('click',function (){
                            _learnq.push(['track', 'Added to Cart', item]);
    });
  </script>


  {% if product.title contains "Scarf" or product.title contains "Shawl" %}
  <script>
     $('form').change(function() {
        let selectedSKU = $('.swatch .color input:checked').parent().data("sku"); 
        let photo1 = '//cdn.shopify.com/s/files/1/0117/0597/4884/t/130/assets/' + '1-photo-' + selectedSKU + ".png"
        let photo2 = '//cdn.shopify.com/s/files/1/0117/0597/4884/t/130/assets/' + '2-photo-' + selectedSKU + ".png"
        let photo3 = '//cdn.shopify.com/s/files/1/0117/0597/4884/t/130/assets/' + '3-photo-' + selectedSKU + ".png"
        let backupphoto1 = '{{ product.images[3] | img_url }}'
        let backupphoto2 = '{{ product.images[4] | img_url }}'
        let backupphoto3 = '{{ product.images[5] | img_url }}'

        $.get(photo1)
          .done(function() { 
        $('.sub_featured_image2').attr("src", photo1)
        $('#lifestyle-1-preview img').attr("src", photo1)

        })
          .fail(function() { 
        $('.sub_featured_image2').attr("src", backupphoto1)
        $('#lifestyle-1-preview img').attr("src", backupphoto1)
        })
            $.get(photo2)
         .done(function() { 
        $('.sub_featured_image3').attr("src", photo2)
        $('#lifestyle-2-preview img').attr("src", photo2)

        })
         .fail(function() { 
        $('.sub_featured_image3').attr("src", backupphoto2)
        $('#lifestyle-2-preview img').attr("src", backupphoto2)
        })
            $.get(photo3)
          .done(function() { 
        $('.sub_featured_image4').attr("src", photo3)
        })
        .fail(function() { 
        $('.sub_featured_image4').attr("src", backupphoto3)
        })

      }); 
  </script>
  {% elsif product.tags contains "Socks"  %}
  <script>

     $('form').change(function() {
        let selectedSku = $('.swatch .color input:checked').parent().data("sku"); 
                var photoStart = 2 
                var singleArray = []; 
                if (selectedSku.length) {
        			var individualSkus = selectedSku.split(",")
                  }
                  else {
                    var individualSkus = singleArray.push(selectedSku)
            
                }
        let imageLength = individualSkus.length
        let backupphoto2 = '{{ product.images[2] | img_url | remove: '_small'}}'
        let backupphoto3 = '{{ product.images[3] | img_url | remove: '_small'}}'
        let backupphoto4 = '{{ product.images[4] | img_url | remove: '_small' }}'
        $(individualSkus).each(function(index, element) {
          var currentPhoto = '.sub_featured_image' + photoStart
          var bubblePhoto = '#lifestyle-' + (photoStart - 1) + '-preview img'
          let newSrc ='//cdn.shopify.com/s/files/1/0117/0597/4884/t/130/assets/' + $.trim(element) + '.jpg'
           $.get(newSrc).done(function() { 
              $(currentPhoto).attr("src", newSrc);
              $(bubblePhoto).attr("src", newSrc);

          })
            .fail(function() { 
             if (photoStart == 2) {
             $(currentPhoto).attr("src", backupphoto2)
                          $(bubblePhoto).attr("src", backupphoto2);
             }
             else if (photoStart == 3) {
             $(currentPhoto).attr("src", backupphoto3)
                          $(bubblePhoto).attr("src", backupphoto3);
             }
               else if (photoStart == 4) {
             $(currentPhoto).attr("src", backupphoto4)
                          $(bubblePhoto).attr("src", backupphoto4);
             }

        	})
              photoStart += 1 
        }); 
      }); 
  </script>
  {% endif %}


  <script>
   {% if product.variants.size > 1 %}

    var variantImages = [],
        variant,
        variantImage

    {% for variant in product.variants %}
    variant = {{ variant | json }};
    if ( typeof variant.featured_image !== 'undefined' && variant.featured_image !== null ) {
      variantImage =  variant.featured_image.src.split('?')[0].replace(/http(s)?:/,'');
      variantImages.push(variantImage)

    }
    {% endfor %}






     $('form').change(function() {
      var imageIndex = $('.swatch .color input:checked').parent().data("index"); 
      $('.featured_image').attr("src", variantImages[imageIndex]);
             $('.product-ab-b .featured_image').attr("src", variantImages[imageIndex]);
            $('.featured_image').show().siblings('img').hide();
            $('.photo-bubble').removeClass("active")
            $('.photo-bubble:first-of-type').addClass('active')
       $('.product-ab-b #product-image-wrapper').scrollLeft('.product-inner-wrap').first(); 
      $('.fake-color-padding').css("border", "none"); 
    })
    $('.color').change(function() {
      var imageIndex = $(this).data("index"); 
      $('.featured_image').attr("src", variantImages[imageIndex]);

      $('.fake-color-padding').css("border", "none"); 

      //           let url = $('#featured-image').attr("src")

      //         $('.product-image').removeClass('border-lightgray')
      //         $('.first-thumb:visible').attr("src", variantImages[imageIndex]).addClass('border-lightgray')
    })
  </script> 
    <script>

    $('.color').change(function() {
      $('.product-ab-b #product-image-wrapper').scrollLeft('.product-inner-wrap').first()
      var imageIndex = $(this).data("index"); 
      $('.product-ab-b .featured_image').attr("src", variantImages[imageIndex]);
      $('.fake-color-padding').css("border", "none"); 
    })
    </script>

    {% endif %}
